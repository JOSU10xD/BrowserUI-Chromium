<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="BrowserUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BrowserUI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:floatingtabs="using:BrowserUI.Controls"
    xmlns:icons="using:BrowserUI.Controls">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="BaseAlt" />
    </Window.SystemBackdrop>

    <Window.Title>
        BrowserUI
    </Window.Title>
    

    <Grid>

        <!--flyout-->
        <Grid.Resources>
            <Flyout x:Name="Moreflyout">
                <StackPanel Width="250">
                    <StackPanel Name="menuHeader">
                        <Button IsEnabled="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" HorizontalContentAlignment="Left" BorderBrush="Transparent" Background="Transparent" Margin="0,0,0,10">
                            <StackPanel Orientation="Horizontal">
                                <!--SETTINGS THE CONTENT OF MAIN USER BUTTON-->
                                <PersonPicture Width="45" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <StackPanel Margin="10,0,0,0" VerticalAlignment="Center">
                                    <TextBlock x:Name="username" Text="Albin" Style="{ThemeResource SubtitleTextBlockStyle}" FontSize="15"/>
                                    <TextBlock Text="local Account" FontSize="12"/>
                                </StackPanel>
                            </StackPanel>
                        </Button>
                        <!--These will separate the content"-->
                        <Border BorderBrush="{ThemeResource ApplicationHeaderForegroundThemeBrush}" Opacity="0.3" Margin="10,5,10,10" BorderThickness="1"/>

                        <Button Tag="NewTab" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,0,0,0" IsEnabled="True" Click="Tabs_Add">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE710;" FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="New Tab"/>
                            </StackPanel>
                        </Button>
                        <Button Tag="NewWindow"  Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,10,0,0" IsEnabled="True" >
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xEC6C;" FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="New Window"/>
                            </StackPanel>
                        </Button>
                        <Button Tag="NewPrivate" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,10,0,0" IsEnabled="True"   >
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}"    Glyph="&#xE90F;"  FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="New private Window"/>
                            </StackPanel>
                        </Button>
                        <Border BorderBrush="{ThemeResource ApplicationHeaderForegroundThemeBrush}" Opacity="0.3" Margin="10,10,10,10" BorderThickness="1"/>
                        <Button Tag="History" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,0,0,0" IsEnabled="True">
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE81c;" FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="History"/>
                            </StackPanel>
                        </Button>
                        <Button Tag="Downloads" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,10,0,0" IsEnabled="True" >
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}" Glyph="&#xE896;" FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="Downloads"/>
                            </StackPanel>
                        </Button>
                        <Button Tag="Bookmarks" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,10,0,0" IsEnabled="True"   >
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}"    Glyph="&#xE728;"  FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="Bookmarks"/>
                            </StackPanel>
                        </Button>
                        <Button Tag="settings" Background="Transparent" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0,10,0,0" IsEnabled="True" Click="SettingsButton_Click" >
                            <StackPanel Orientation="Horizontal">
                                <FontIcon FontFamily="{StaticResource FluentIcons}"    Glyph="&#xE713;"  FontSize="18" Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                                <TextBlock Margin="10,0,0,0" Text="Settings"/>
                            </StackPanel>
                        </Button>

                    </StackPanel>
                </StackPanel>
            </Flyout>
        </Grid.Resources>

        <floatingtabs:FireBrowserTabViewContainer x:Name="Tabs"
      Visibility="Visible"
      x:FieldModifier="public"
      Padding="0"
      VerticalAlignment="Stretch"
      Mode="Modern"
      Grid.Row="0"
     Loaded="Tabs_Loaded"
     AddTabButtonClick="Tabs_AddTabButtonClick"
     TabCloseRequested="Tabs_TabCloseRequested"
      >
            <floatingtabs:FireBrowserTabViewContainer.TabStripHeader>
                <Image Source="Assets/browserlogo.ico" Width="32" Height="32" Margin="5,0,0,0" />
            </floatingtabs:FireBrowserTabViewContainer.TabStripHeader>
            <floatingtabs:FireBrowserTabViewContainer.TabStripFooter>
                <Grid x:Name="Apptitlebar" IsHitTestVisible="False" MinWidth="175" LayoutUpdated="Apptitlebar_LayoutUpdated"/>
            </floatingtabs:FireBrowserTabViewContainer.TabStripFooter>
        </floatingtabs:FireBrowserTabViewContainer>

        <Grid x:Name="TopBar" Height="37" x:FieldModifier="Public" Margin="0,40,0,0" VerticalAlignment="Top" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Top Bar -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <AppBarButton Click="BackButton_Click"  Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon 
                        FontFamily="Segoe Fluent Icons" 
                        Glyph="&#xE72B;" 
                        FontSize="15"
                        Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Back" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
                <AppBarButton  Click="ForwardButton_Click" Margin="0, -5, 0, 0">
                    <AppBarButton.Icon>
                        <FontIcon 
                                FontFamily="Segoe Fluent Icons" 
                                Glyph="&#xE72A;" 
                                FontSize="16" 
                                Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Forward" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
                <AppBarButton  Click="RefreshButton_Click" Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon 
                             FontFamily="Segoe Fluent Icons" 
                                 Glyph="&#xE72C;" 
                                 FontSize="16" 
                                 Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Refresh" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
                <AppBarButton  Click="HomeButton_Click"  Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon 
              FontFamily="Segoe Fluent Icons" 
                Glyph="&#xE80F;"
                  FontSize="16" 
                  Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Home" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>

            </StackPanel>
            <Grid x:Name="Box" Grid.Column="1" Height="32" Margin="4,0,4,0" VerticalAlignment="Center">
                <AutoSuggestBox Padding="32,5,5,0" CornerRadius="5" x:FieldModifier="Public" x:Name="UrlBox" Style="{StaticResource PortalBarStyle}" x:Uid="SearchBar" PlaceholderText="Enter URL"  Loaded="UrlBox_Loaded"/>
                <Button x:Name="SearchButton" Style="{StaticResource QuietButtonStyle}" Foreground="{ThemeResource TextFillColorDisabledBrush}" x:FieldModifier="Public" HorizontalAlignment="Left" Click="GoButton_Click">
                    <Button.Content>
                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE721;" />
                    </Button.Content>
                </Button>
            </Grid>
            <StackPanel Grid.Column="2" Orientation="Horizontal">

                <AppBarButton x:Name="Favorite" x:Uid="FavoriteUID" Tag="FavoriteMenu" Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon
                                 FontFamily="Segoe Fluent Icons" 
                                 Glyph="&#xE728;" 
                                 FontSize="16" 
                                 Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Favorites" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
                <AppBarButton x:Name="downloads" x:Uid="downloadsUID" Tag="downloadsMenu" Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon
                             FontFamily="Segoe Fluent Icons" 
                             Glyph="&#xE896;" 
                             FontSize="16" 
                             Foreground="{ThemeResource AccentAAFillColorDefaultBrush}"/>
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Downloads" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
                <AppBarButton x:Name="Screenshot" x:Uid="BarcodeUID" Tag="BarcodeMenu" Click="ScreenshotButton_Click" Margin="0,-5,0,0">
                    <AppBarButton.Icon>
                        <FontIcon
              FontFamily="Segoe Fluent Icons" 
                   Glyph="&#xE722;" 
                 FontSize="16" 
                 Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="Screenshot" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>

                <AppBarButton x:Name="MenuMore" x:Uid="MenuMoreUID" Tag="MoreMenu" Flyout="{StaticResource Moreflyout}" VerticalAlignment="Stretch" Margin="0,-5,0,0" >
                    <AppBarButton.Icon >
                        <FontIcon 
                              FontFamily="Segoe Fluent Icons" 
                              Glyph="&#xE712;"
                              FontSize="16" 
                              Foreground="{ThemeResource AccentAAFillColorDefaultBrush}" />
                    </AppBarButton.Icon>
                    <ToolTipService.ToolTip>
                        <ToolTip Content="More" Placement="Bottom" HorizontalOffset="10" VerticalOffset="20" />
                    </ToolTipService.ToolTip>
                </AppBarButton>
            </StackPanel>
        </Grid>

    </Grid>

</Window>
